<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Grid Tables - Basic example of a Bootstrap 4 table with sort, search and filter functionality.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"
    />
    <meta name="description" content="Basic example of a Bootstrap 4 table with sort, search and filter functionality.">

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!-- <script src="architectui-html-pro-theme-package/architectui-html-pro-theme/architectui-html-pro/assets/scripts/main.8d288f825d8dffbbe55e.js"></script> -->
	<link href="architectui-html-pro-theme-package/architectui-html-pro-theme/architectui-html-pro/main.8d288f825d8dffbbe55e.css" rel="stylesheet">
	<!-- firebase -->
	<script src="https://www.gstatic.com/firebasejs/6.4.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/6.4.0/firebase-auth.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use https://firebase.google.com/docs/web/setup#config-web-app -->
    <!-- firebaseUI -->
    <script src="https://cdn.firebase.com/libs/firebaseui/4.0.0/firebaseui.js"></script>
    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/6.4.0/firebase-database.js"></script>
    <!-- firebase Config and initialize -->	
    <script src="firebase/firebase-config.js"></script>

</head>

<script th:inline="javascript">
/*<![CDATA[*/
 var list = /*[[${salesDetailList}]]*/;
 var database = firebase.database();
 
	$(function(){	
		$("#header").load("/header");
		$("#navbar").load("/navbar");
		$("#setting").load("/setting");

		selectTest();
	})
		
		function selectTest(){
		
			database.ref('warehouse/').on('child_added', function(data){
				var warehouse_code = data.key;
				var warehouse_name = data.val().warehouse_name;
				database.ref('warehouse/'+warehouse_code).child("inventory").on('child_added', function(snapshot){
					
					for(var i = 0; i<list.length ; i++){
					if(snapshot.key==list[i].pd_code){
						var amount = snapshot.child("systemamount").val();
						var index = i+1;
						str1= '<tr align="center">';
						str1+='<td>'+index+'</td>';
						str1+='<td>'+list[i].salesdetail_name+'</td>';
						str1+='<td>'+list[i].salesdetail_amount+'</td>';
						str1+='<td>'+amount+'</td>';
						if(list[i].salesdetail_amount<=amount){
					    str1+='<td><a href="#" class="mb-2 mr-2 btn btn-primary">READY</a></td></tr>';
						}else{
						str1+='<td><a href="#" class="mb-2 mr-2 btn btn-danger">생산요청</a></td></tr>';	
						}
						
						if(!list.salesdetail_amount>amount){
							alert('!');
						}
						$('#tbody1').append(str1);
						}
					}
					
		    	});
			});
			
		}
		
	/*]]>*/
</script>
<body>
<div class="app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar">
    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Header삽입@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
    <div id="header"></div>
    <div id="setting"></div> 
            <div class="app-main">
            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@왼쪽 메뉴@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                <div id="navbar"></div>
                <div class="app-main__outer">
                <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                <div class="app-main__inner">
                   
                    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@위에 달린 메뉴 -->

                   <div class="main-card mb-3 card">
                              <div class="card-body" >
                          <br />
                                      <div class="mb-3 card">
                                          <div class="card-body"><br /><br /><hr />
                                            <table style="width: 100%;" id="example" class="table table-hover table-bordered">
                                        <thead>
                                        <tr align="center">
                                            <th>no</th>
                                            <th>품 목</th>
                                            <th>주문수량</th>
                                            <th>현재고량</th>
                                            <th>Status</th>
                                        </tr>
                                        </thead>
                                          <tbody id="tbody1">
                                      
                                		  </tbody>
                                    </table><hr /></div>
                                   </div>
                                </div>
                            </div>
                         </div>
                <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
             
                <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@footer 삽입@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->   
        </div>
    </div>
</div>
<!-- drawer 삽입 -->
<div class="app-drawer-overlay d-none animated fadeIn"></div>
</body>
</html>
