<!doctype html>
<html lang="utf-8" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Register Boxed - ArchitectUI HTML Bootstrap 4 Dashboard Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"
    />
    <meta name="description" content="ArchitectUI HTML Bootstrap 4 Dashboard Template">

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="architectui-html-pro-theme-package/architectui-html-pro-theme/architectui-html-pro/assets/scripts/main.8d288f825d8dffbbe55e.js"></script>
<link href="architectui-html-pro-theme-package/architectui-html-pro-theme/architectui-html-pro/main.8d288f825d8dffbbe55e.css" rel="stylesheet">

<script th:inline="javascript">
/*<![CDATA[*/
	$(function(){
		var rawm_code = /*[[${rawm_code}]]*/;
		$.ajax({
			url:"rawMaterialOneSelect",
			data:{rawm_code : rawm_code},
			type:"POST",
			success:function(result){
				$("#rawm_code").val(result.rawm_code);
				$("#rawm_name").val(result.rawm_name);
				$("#rawm_sort").val(result.rawm_sort);
				$("#rawm_price").val(result.rawm_price);
				$("#supplierseq").val(result.supplierseq);
				$("#rawm_notice").val(result.rawm_notice);
				var notice = $("#rawm_notice").val();
				var mini = result.rawm_minimum;
				var checked = 'CHECKED';
				var nocheck = 'UNCHECKED';
				var min = 0;
				
				if(notice =='CHECKED'){
					
					$("#rawm_notice").prop('checked', true) ;
					var str1 = '<label for="rawm_minimum" class="">원자재최저수량</label>'
						+'<input name="rawm_minimum" id="rawm_minimum" type="number"'
						+'value='+mini+' class="form-control">';
						
					$(".form-group1").html(str1);
					
					$("#rawm_notice").change(function() {
						if ($("#rawm_notice").is(":checked")) {
							$("#rawm_notice").val(checked);
							var str1 = '<label for="rawm_minimum" class="">원자재최저수량</label>'
									+ '<input name="rawm_minimum" id="rawm_minimum" type="number" value='+mini+' class="form-control">'
							$(".form-group1").html(str1);
						} else {
							$("#rawm_notice").val(nocheck);
							var str1 = '<input name="rawm_minimum" id="rawm_minimum" type="hidden"'
								+'value='+min+' class="form-control">';
							$(".form-group1").html(str1);
						}
					});
				}else{
					var str1 = '<input name="rawm_minimum" id="rawm_minimum" type="hidden"'
						+'value='+mini+' class="form-control">';
					$(".form-group1").html(str1);
					
					$("#rawm_notice").change(function() {
						if ($("#rawm_notice").is(":checked")) {
							$("#rawm_notice").val(checked);
							var str1 = '<label for="rawm_minimum" class="">원자재최저수량</label>'
									+ '<input name="rawm_minimum" id="rawm_minimum" type="number" value='+mini+' class="form-control">'
							$(".form-group1").html(str1);
						} else {
							
							$("#rawm_notice").val(nocheck);
							var str1 = '<input name="rawm_minimum" id="rawm_minimum" type="hidden"'
								+'value='+min+' class="form-control">';
							$(".form-group1").html(str1);
						}
					});
				}
			}
		});
		$("#updateButton").click(function(){
			var code = $("#rawm_code").val();
			var name = $("#rawm_name").val();
			var sort = $("#rawm_sort").val();
			var price = $("#rawm_price").val();
			var seq = $("#supplierseq").val();
			var order = $("#rawm_notice").val();
			var minimum = $("#rawm_minimum").val();

			var code1 = $("#rawm_code1").val(code);
			var name1 = $("#rawm_name1").val(name);
			var sort1 = $("#rawm_sort1").val(sort);
			var price1 = $("#rawm_price1").val(price);
			var seq1 = $("#supplierseq1").val(seq);
			var order1 = $("#rawm_notice1").val(order);
			var minimum1 = $("#rawm_minimum1").val(minimum);
			
			
			var code2 = $("#rawm_code1").val();
			var name2 = $("#rawm_name1").val();
			var sort2 = $("#rawm_sort1").val();
			var price2 = $("#rawm_price1").val();
			var seq2 = $("#supplierseq1").val();
			var order2 = $("#rawm_notice1").val();
			var minimum2 = $("#rawm_minimum1").val();
			
			if(!name2){
				alert("원자재명을 입력해주세요");
				return false;
			}
			if(!sort2){
				alert("원자재종류를 입력해주세요");
				return false;
			}
			if(!price2){
				alert("원자재단가를 입력해주세요");
				return false;
			}
			if(!seq2){
				alert("공급처명을 입력해주세요");
				return false;
			}
			if ($("#rawm_notice").is(":checked")) {
				if(minimum2.length < 1){
					alert("원자재최저량을 1개이상 입력해주세요");
					return false;
				}
			}
			
			$("#rawMaterialUpdateForm").submit();
			opener.document.location.href="/goMaterials";
            self.close();
		});
	});
	/*]]>*/
</script>
</head>
<body>
<form action="rawMaterialUpdate" method="post" id="rawMaterialUpdateForm">
	<input type="hidden" id="rawm_code1" name="rawm_code">
	<input type="hidden" id="rawm_name1" name="rawm_name">
	<input type="hidden" id="rawm_sort1" name="rawm_sort">
	<input type="hidden" id="rawm_price1" name="rawm_price">
	<input type="hidden" id="supplierseq1" name="supplierseq">
	<input type="hidden" id="rawm_notice1" name="rawm_notice">
	<input type="hidden" id="rawm_minimum1" name="rawm_minimum">
</form>

<div class="app-container app-theme-white body-tabs-shadow">
        <div class="app-container">
            <div class="h-100 bg-premium-dark">
                <div class="d-flex h-100 justify-content-center align-items-center">
                    <div class="mx-auto app-login-box col-md-8">
                        <div class="app-logo-inverse mx-auto mb-3"></div>
                        <div class="modal-dialog w-100">
                            <div class="modal-content">
                                <div class="modal-body">
                                    <h5 class="modal-title">
                                        <h4 class="mt-2">
                                       
                                            <div>원자재 수정</div>
                                            <span>새로 수정 하실 <span class="text-success">원자재 정보</span> 를 기입해주세요</span></h4>
                                    </h5>
                                    <div class="col-md-3">
										<div class="form-group">
											<label for="rawm_code">원자재코드</label> <input id="rawm_code"
												name="rawm_code" type="text" 
												readonly="readonly" class="form-control">
										</div>
										<div class="form-group">
											<label for="rawm_name">원재료명</label> <input id="rawm_name"
												name="rawm_name" type="text"
												class="form-control">
										</div>
										<div class="form-group">
											<label for="rawm_sort">원재료종류</label> <input id="rawm_sort"
												name="rawm_sort" type="text"
												class="form-control">
										</div>
										<div class="form-group">
											<label for="rawm_price">단가</label> <input id="rawm_price" type="text"
												name="rawm_price"
												class="form-control">
										</div>
										<div class="form-group">
											<label for="supplierseq" class="select">공급처명</label> <input
												name="supplierseq" id="supplierseq" list="test" class="form-control" autocomplete="off">
											<datalist class="select" id="test" >
												<option class="sList" th:each="list : ${supplierList}" 
													th:text="${list.supplier_name}" th:value="${list.supplierseq}">
												</option>
											</datalist>
								
								
										</div>
										<div class="position-relative form-group">
											<div class="custom-checkbox custom-control">
												<input type="checkbox" id="rawm_notice" name="rawm_notice"
													class="custom-control-input">
												<label class="custom-control-label" for="rawm_notice">&nbsp;자동구매</label>
											</div>
										</div>
										<!-- if check -->
										<div class="form-row">
											<div class="col-md-6">
												<div class="position-relative form-group1">
								
												</div>
											</div>
										</div>
									</div>
									<div class="modal-footer d-block text-center">
                                    <button id="updateButton" class="btn-wide btn-pill btn-shadow btn-hover-shine btn btn-primary btn-lg" type="button">원자재 수정</button>
                                </div>
                                    </div>
                                    
                                
                            </div>
                        </div>
                        <div class="text-center text-white opacity-8 mt-3">Copyright © ArchitectUI 2019</div>
                    </div>
                </div>
            </div>
        </div>
</div>

</body>
</html>
